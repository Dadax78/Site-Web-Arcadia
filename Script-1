document.addEventListener('DOMContentLoaded', () => {
    function setupViewCounter(buttonId, countId, animalName) {
        const viewButton = document.getElementById(buttonId);
        const viewCountElement = document.getElementById(countId);

        if (!viewButton || !viewCountElement) {
            console.error(`L'élément avec l'ID "${buttonId}" ou "${countId}" est introuvable.`);
            return;
        }

        viewButton.addEventListener('click', () => {
            fetch(`increment_view.php?animal_name=${animalName}`)
                .then(response => response.json())
                .then(data => {
                    if (data.status === "success") {
                        viewCountElement.textContent = "Nombre de vues : " + data.view_count;
                        console.log("Vues mises à jour : " + data.view_count);

                        // Si une redirection est nécessaire après la mise à jour
                        // Vous pouvez mettre en place la redirection ici.
                        window.location.href = "nouvelle_page.html";  // Remplacez par votre URL de redirection
                    } else {
                        console.error(data.message);
                    }
                })
                .catch(error => console.error('Erreur : ', error));
        });
    }

    setupViewCounter('view-button-medor-lion-afrique', 'view-count-medor-lion-afrique', 'medor-lion-afrique');
    setupViewCounter('view-button-simba', 'view-count-simba', 'simba');
});